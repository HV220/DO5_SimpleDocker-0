# Simple Docker
## Contents
[Part_1](#part-1) \
[Part_2](#part-2) \
[Part_3](#part-3) \
[Part_4](#part-4) \
[Part_5](#part-5) \
[Part_6](#part-6)

## Part 1.

* ##### Взять официальный докер образ с  **nginx** и выкачать его при помощи `docker pull`
* ##### Проверить наличие докер образа через `docker images`
* ##### Запустить докер образ через `docker run -d [image_id|repository]`
* ##### Проверить, что образ запустился через `docker ps`
![part1](images/part1.png)
* ##### Посмотреть информацию о контейнере через `docker inspect [container_id|container_name]`
* ##### По выводу команды определить и поместить в отчёт размер контейнера, список замапленных портов и ip контейнера
![part2](images/part2.png)
* ##### Остановить докер образ через `docker stop [container_id|container_name]`
* ##### Проверить, что образ остановился через `docker ps`
![part3](images/part3.png)
* ##### Запустить докер с замапленными портами 80 и 443 на локальную машину через команду *run*
![part5](images/part5.png)
![part6](images/part6.png)
* ##### Проверить, что в браузере по адресу *localhost:80* доступна стартовая страница **nginx**
![part4](images/part4.png)
![part8](images/part7.png)
*  ##### Перезапустить докер контейнер через `docker restart [container_id|container_name]`
* ##### Проверить любым способом, что контейнер запустился
![part8](images/part8.png)
## Part 2.
* ##### Прочитать конфигурационный файл *nginx.conf* внутри докер контейнера через команду *exec*
![part9](images/part9.png)
* ##### Создать на локальной машине файл *nginx.conf*
* ##### Настроить в нем по пути */status* отдачу страницы статуса сервера **nginx**
* ##### Скопировать созданный файл *nginx.conf* внутрь докер образа через команду `docker cp`
* ##### Перезапустить **nginx** внутри докер образа через команду *exec*
* ##### Проверить, что по адресу *localhost:80/status* отдается страничка со статусом сервера **nginx**
![part10](images/part10.png)
* ##### Экспортировать контейнер в файл *container.tar* через команду *export*
* ##### Остановить контейнер
* ##### Удалить образ через `docker rmi [image_id|repository]`, не удаляя перед этим контейнеры
* ##### Удалить остановленный контейнер
![part11](images/part11.png)
* ##### Импортировать контейнер обратно через команду *import*
![part12](images/part12.png)
* ##### Запустить импортированный контейнер
* ##### Проверить, что по адресу *localhost:80/status* отдается страничка со статусом сервера **nginx**
![part13](images/part13.png)

## Part 3.

* ##### Написать мини сервер на **C** и **FastCgi**, который будет возвращать простейшую страничку с надписью `Hello World!`
* ##### Запустить написанный мини сервер через *spawn-fcgi* на порту 8080
* ##### Написать свой *nginx.conf*, который будет проксировать все запросы с 81 порта на *127.0.0.1:8080*
* ##### Проверить, что в браузере по *localhost:81* отдается написанная вами страничка
* ##### Положить файл *nginx.conf* по пути *./nginx/nginx.conf*

## Part 4.
* #### Написать свой докер образ, который:
* ##### 1) собирает исходники мини сервера на FastCgi из [Части 3](#part-3)
* ##### 2) запускает его на 8080 порту
* ##### 3) копирует внутрь образа написанный *./nginx/nginx.conf*
* ##### 4) запускает **nginx**.

* ##### Собрать написанный докер образ через `docker build` при этом указав имя и тег
* ##### Проверить через `docker images`, что все собралось корректно
* ##### Запустить собранный докер образ с маппингом 81 порта на 80 на локальной машине и маппингом папки *./nginx* внутрь контейнера по адресу, где лежат конфигурационные файлы **nginx**'а (см. [Часть 2](#part-2))
* ##### Проверить, что по localhost:80 доступна страничка написанного мини сервера
* ##### Дописать в *./nginx/nginx.conf* проксирование странички */status*, по которой надо отдавать статус сервера **nginx**
* ##### Перезапустить докер образ
* ##### Проверить, что теперь по *localhost:80/status* отдается страничка со статусом **nginx**
* ##### Результат выполненной работы находится в папке `src/part_3`

## Part 5.
* ##### Результат выполненной работы находится в папке `src/part_4`
* ##### Вместо `dockle` был использован `scan`, который выполняет такую же функцию по поиску уязвимостей образов
![part14](images/part14.png)

## Part 6.
* ##### Написать файл *docker-compose.yml*, с помощью которого:
* ##### 1) Поднять докер контейнер из [Части 5](#part-5) _(он должен работать в локальной сети, т.е. не нужно использовать инструкцию **EXPOSE** и мапить порты на локальную машину)_
* ##### 2) Поднять докер контейнер с **nginx**, который будет проксировать все запросы с 8080 порта на 81 порт первого контейнера
* ##### Замапить 8080 порт второго контейнера на 80 порт локальной машины

* ##### Остановить все запущенные контейнеры
* ##### Собрать и запустить проект с помощью команд `docker-compose build` и `docker-compose up`
* ##### Проверить, что в браузере по *localhost:80* отдается написанная вами страничка, как и ранее